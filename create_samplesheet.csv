#!/bin/bash

# Read directory that comes as argument 1
# This directory contains a bunch of subdirs in the form of:
# barcode1/
# barcode2/
# barcoden/


#
sampleSheet="samplesheet.csv"

#create samplesheet
echo "sample,barcode" > $sampleSheet

while read line;do

  #Some entries are not valid. Barcode has to be numeric
  	#read SampleID and Barcode
 sampleid=$(echo ${line} | awk '{print $1}')
 barcode=$(echo ${line} | awk '{print $2}')
 
 #If barcode or Sample ID are NOT empty
  if [ -n "${barcode}" ];then

 	 printf "hCoV-19/Colombia/${sampleid},${barcode}\n" >> $sampleSheet
  fi


done < ${1}
